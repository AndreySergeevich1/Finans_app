import{x as v,e as _,c as m,o as p,b as r,a as n,u as o,n as c,f as w,v as S,F as V,p as k,t as f,w as g,d as y,S as P,j as h}from"./app-B-v3dGX0.js";import{_ as d,a as b,b as u}from"./TextInput-BCiOBFgQ.js";import{P as B}from"./PrimaryButton-DeN2JkVD.js";import{_ as T}from"./SecondaryButton-CaNu0TH9.js";const $={class:"space-y-4"},C={class:"mt-1 flex rounded-md shadow-sm"},R=["value"],U={class:"flex items-center justify-end pt-6 mt-6 border-t border-gray-200 dark:border-gray-700 space-x-3"},M={__name:"CategoryForm",props:{category:{type:Object,default:null},potentialParents:{type:Array,default:()=>[]},submitRoute:{type:String,required:!0},cancelRoute:{type:String,required:!0},submitButtonText:{type:String,default:"Сохранить"}},setup(i){const a=i,e=v({_method:"POST",name:"",type:"expense",parent_id:null,icon:""});_(()=>{a.category&&(e._method="PUT",e.name=a.category.name,e.type=a.category.type,e.parent_id=a.category.parent_id,e.icon=a.category.icon||"")});const x=()=>{const l=a.category?{category:a.category.id}:{},t={preserveScroll:!0};e._method==="PUT"?e.put(route(a.submitRoute,l),t):e.transform(s=>({...s,_method:void 0})).post(route(a.submitRoute,l),t)};return(l,t)=>(p(),m("form",{onSubmit:h(x,["prevent"])},[r("div",$,[r("div",null,[n(d,{for:"name",value:"Название категории"}),n(b,{id:"name",type:"text",class:"mt-1 block w-full",modelValue:o(e).name,"onUpdate:modelValue":t[0]||(t[0]=s=>o(e).name=s),required:"",autofocus:"",placeholder:"Напр., Продукты"},null,8,["modelValue"]),n(u,{class:"mt-2",message:o(e).errors.name},null,8,["message"])]),r("div",null,[n(d,{value:"Тип"}),r("div",C,[r("button",{type:"button",onClick:t[1]||(t[1]=s=>o(e).type="expense"),class:c(["relative inline-flex items-center px-4 py-2 rounded-l-md border border-gray-300 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o(e).type==="expense"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 hover:bg-gray-50"])},"Расход",2),r("button",{type:"button",onClick:t[2]||(t[2]=s=>o(e).type="income"),class:c(["-ml-px relative inline-flex items-center px-4 py-2 rounded-r-md border border-gray-300 text-sm font-medium focus:z-10 focus:outline-none focus:ring-1 focus:ring-indigo-500 focus:border-indigo-500",o(e).type==="income"?"bg-indigo-600 text-white border-indigo-600":"bg-white text-gray-700 hover:bg-gray-50"])},"Доход",2)]),n(u,{class:"mt-2",message:o(e).errors.type},null,8,["message"])]),r("div",null,[n(d,{for:"parent_id",value:"Родительская категория (необязательно)"}),w(r("select",{id:"parent_id","onUpdate:modelValue":t[3]||(t[3]=s=>o(e).parent_id=s),class:"mt-1 block w-full form-select"},[t[5]||(t[5]=r("option",{value:null},"-- Нет (корневая категория) --",-1)),(p(!0),m(V,null,k(i.potentialParents,s=>(p(),m("option",{key:s.id,value:s.id},f(s.name),9,R))),128))],512),[[S,o(e).parent_id]]),n(u,{class:"mt-2",message:o(e).errors.parent_id},null,8,["message"]),t[6]||(t[6]=r("p",{class:"text-xs text-gray-500 mt-1"},"Позволяет создавать иерархию (напр., Еда -> Продукты).",-1))]),r("div",null,[n(d,{for:"icon",value:"Название иконки (необязательно)"}),n(b,{id:"icon",type:"text",class:"mt-1 block w-full",modelValue:o(e).icon,"onUpdate:modelValue":t[4]||(t[4]=s=>o(e).icon=s),placeholder:"shopping-cart (напр., из Heroicons)"},null,8,["modelValue"]),n(u,{class:"mt-2",message:o(e).errors.icon},null,8,["message"]),t[7]||(t[7]=r("p",{class:"text-xs text-gray-500 mt-1"},"Используйте названия иконок из выбранной библиотеки (напр., Heroicons).",-1))])]),r("div",U,[n(o(P),{href:l.route(i.cancelRoute)},{default:g(()=>[n(T,{type:"button"},{default:g(()=>t[8]||(t[8]=[y("Отмена")])),_:1})]),_:1},8,["href"]),n(B,{class:c({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:g(()=>[y(f(i.submitButtonText),1)]),_:1},8,["class","disabled"])])],32))}};export{M as _};
