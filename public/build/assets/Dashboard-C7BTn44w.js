import{_ as $}from"./AuthenticatedLayout-BL5gwWCJ.js";import{c as o,o as s,b as t,r as R,k as h,a as n,u as d,g as U,w as x,t as u,F as y,p as k,S as v,d as g,A as F,s as w,l as B}from"./app-B-v3dGX0.js";import{_ as L}from"./TransactionItem-Bx24EVpS.js";import{_ as T}from"./DebtItem-CNiaH6X_.js";import{_ as I}from"./DoughnutChart-Dzaetu7X.js";function S(a,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"})])}function E(a,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18 9 11.25l4.306 4.306a11.95 11.95 0 0 1 5.814-5.518l2.74-1.22m0 0-5.94-2.281m5.94 2.28-2.28 5.941"})])}function V(a,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"})])}function Z(a,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"})])}function z(a,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3v11.25A2.25 2.25 0 0 0 6 16.5h2.25M3.75 3h-1.5m1.5 0h16.5m0 0h1.5m-1.5 0v11.25A2.25 2.25 0 0 1 18 16.5h-2.25m-7.5 0h7.5m-7.5 0-1 3m8.5-3 1 3m0 0 .5 1.5m-.5-1.5h-9.5m0 0-.5 1.5m.75-9 3-3 2.148 2.148A12.061 12.061 0 0 1 16.5 7.605"})])}function P(a,l){return s(),o("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true","data-slot":"icon"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3v17.25m0 0c-1.472 0-2.882.265-4.185.75M12 20.25c1.472 0 2.882.265 4.185.75M18.75 4.97A48.416 48.416 0 0 0 12 4.5c-2.291 0-4.545.16-6.75.47m13.5 0c1.01.143 2.01.317 3 .52m-3-.52 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.988 5.988 0 0 1-2.031.352 5.988 5.988 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L18.75 4.971Zm-16.5.52c.99-.203 1.99-.377 3-.52m0 0 2.62 10.726c.122.499-.106 1.028-.589 1.202a5.989 5.989 0 0 1-2.031.352 5.989 5.989 0 0 1-2.031-.352c-.483-.174-.711-.703-.59-1.202L5.25 4.971Z"})])}const W={class:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight"},q={class:"py-8"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},H={class:"grid grid-cols-1 lg:grid-cols-3 gap-6"},J={class:"lg:col-span-2 space-y-6"},K={class:"bg-gradient-to-br from-purple-500 to-indigo-600 text-white p-6 rounded-2xl shadow-lg relative"},O={class:"flex justify-between items-start mb-4"},Q={class:"text-lg font-semibold opacity-90"},X={class:"text-sm opacity-80"},Y={key:0,class:"relative ml-4"},tt=["value"],et=["value"],rt={key:1,class:"text-xs opacity-70"},st={class:"text-4xl font-bold tracking-tight mb-1"},at={class:"mt-4 text-right"},ot={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-md"},nt={class:"flex justify-between items-center mb-4"},lt={key:0,class:"mb-4"},it={class:"text-2xl font-semibold text-gray-800 dark:text-gray-200"},dt={class:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5 mt-2"},ct={class:"text-xs text-gray-500 dark:text-gray-400 mt-1 text-right"},ut={key:1,class:"mb-4 text-center text-gray-500"},mt={class:"grid grid-cols-2 gap-4"},ht={class:"bg-green-50 dark:bg-green-900/30 border border-green-200 dark:border-green-700/50 rounded-lg p-3"},gt={class:"flex items-center text-sm text-green-700 dark:text-green-400 mb-1"},xt={class:"text-lg font-semibold …"},vt={class:"bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-700/50 rounded-lg p-3"},ft={class:"flex items-center text-sm text-red-700 dark:text-red-400 mb-1"},yt={class:"text-lg font-semibold …"},pt={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-md"},kt={class:"flex justify-between items-center mb-4"},bt={class:"space-y-1 -mx-1"},_t={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},wt={class:"space-y-6"},Bt={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-md"},Ct={class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center"},Dt={class:"h-48 bg-gray-100 dark:bg-gray-700 rounded-lg flex items-center justify-center text-gray-400 dark:text-gray-500 text-sm"},At={class:"bg-white dark:bg-gray-800 p-6 rounded-2xl shadow-md"},jt={class:"text-lg font-semibold text-gray-700 dark:text-gray-300 mb-4 flex items-center"},Nt={class:"space-y-3"},Mt={key:0,class:"text-center text-gray-500 dark:text-gray-400 py-4"},$t={class:"mt-4 text-right"},It={__name:"Dashboard",props:{accounts:{type:Array,default:()=>[]},totalBalance:{type:Number,default:0},monthlyLimit:{type:Number,default:0},monthlyIncome:{type:Number,default:0},monthlyExpenses:{type:Number,default:0},recentTransactions:{type:Array,default:()=>[]},activeDebts:{type:Array,default:()=>[]}},setup(a){const l=a,c=R(l.accounts.length>0?"all":null),m=h(()=>c.value==="all"||c.value===null?null:l.accounts.find(r=>r.id===c.value)),C=h(()=>c.value==="all"?l.totalBalance:m.value?m.value.balance:0),b=h(()=>c.value==="all"?"RUB":m.value?m.value.currency:"RUB"),D=h(()=>c.value==="all"?"Общий баланс":m.value?m.value.name:"Счет не найден"),A=h(()=>{var i;if(c.value==="all")return"по всем счетам";const r=(i=m.value)==null?void 0:i.type;return r?{bank_account:"Банк. счет",card:"Карта",cash:"Наличные",savings:"Вклад",other:"Другое"}[r]||"Неизвестно":""}),j=h(()=>{}),_=(r,e="RUB")=>new Intl.NumberFormat("ru-RU",{style:"decimal",minimumFractionDigits:2,maximumFractionDigits:2}).format(r||0),f=(r,e="RUB")=>new Intl.NumberFormat("ru-RU",{style:"currency",currency:e,minimumFractionDigits:2}).format(r||0),N=r=>{const e=r.target.value;c.value=e==="all"?"all":parseInt(e,10)},p=h(()=>c.value==="all"?l.recentTransactions:l.recentTransactions.filter(r=>r.account_id===c.value)),M=h(()=>p.value.filter(r=>r.type==="income").reduce((r,e)=>r+e.amount,0));return h(()=>p.value.filter(r=>r.type==="expense").reduce((r,e)=>r+e.amount,0)),h(()=>l.chartData),(r,e)=>(s(),o(y,null,[n(d(U),{title:"Dashboard"}),n($,null,{header:x(()=>[t("h2",W," Привет, "+u(r.$page.props.auth.user.name)+"! ",1)]),default:x(()=>[t("div",q,[t("div",G,[t("div",H,[t("div",J,[t("div",K,[t("div",O,[t("div",null,[t("h3",Q,u(D.value),1),t("p",X,u(A.value),1)]),a.accounts.length>0?(s(),o("div",Y,[t("select",{value:c.value,onChange:N,class:"appearance-none bg-white/20 hover:bg-white/30 text-white text-xs font-medium rounded-full py-1 pl-3 pr-6 cursor-pointer focus:outline-none focus:ring-2 focus:ring-white/50 transition-colors","aria-label":"Выбрать счет"},[e[0]||(e[0]=t("option",{value:"all",class:"text-black"},"Все счета",-1)),(s(!0),o(y,null,k(a.accounts,i=>(s(),o("option",{key:i.id,value:i.id,class:"text-black"},u(i.name),9,et))),128))],40,tt),n(d(V),{class:"w-3 h-3 text-white absolute right-2 top-1/2 transform -translate-y-1/2 pointer-events-none"})])):(s(),o("div",rt," Нет счетов "))]),t("p",st,u(f(C.value,b.value)),1),t("div",at,[n(d(v),{href:m.value?r.route("accounts.show",m.value.id):r.route("accounts.index"),class:"text-sm font-medium hover:underline opacity-90"},{default:x(()=>[g(u(m.value?"Детали счета":"Все счета")+" → ",1)]),_:1},8,["href"])])]),t("div",ot,[t("div",nt,[e[1]||(e[1]=t("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300"},"Обзор за месяц",-1)),n(d(v),{href:r.route("profile.edit"),class:"text-gray-400 hover:text-indigo-600 dark:hover:text-indigo-400",title:"Настроить лимит в профиле"},{default:x(()=>[n(d(Z),{class:"w-5 h-5"})]),_:1},8,["href"])]),a.monthlyLimit>0?(s(),o("div",lt,[e[2]||(e[2]=t("p",{class:"text-sm text-gray-500 dark:text-gray-400"},"Месячный лимит трат",-1)),t("p",it,u(f(a.monthlyLimit,"RUB")),1),t("div",dt,[t("div",{class:"bg-gradient-to-r from-pink-500 to-orange-400 h-2.5 rounded-full",style:F({width:j.value+"%"})},null,4)]),t("p",ct,u(_(a.monthlyExpenses,"RUB"))+" из "+u(_(a.monthlyLimit,"RUB")),1)])):(s(),o("div",ut,[e[4]||(e[4]=g(" Месячный лимит не установлен. ")),n(d(v),{href:r.route("profile.edit"),class:"text-indigo-600 hover:underline"},{default:x(()=>e[3]||(e[3]=[g("Установить?")])),_:1},8,["href"])])),t("div",mt,[t("div",ht,[t("div",gt,[n(d(E),{class:"w-4 h-4 mr-1"}),e[5]||(e[5]=g(" Доход "))]),t("p",xt,u(f(M.value,b.value)),1)]),t("div",vt,[t("div",ft,[n(d(S),{class:"w-4 h-4 mr-1"}),e[6]||(e[6]=g(" Расход "))]),t("p",yt,u(f(a.monthlyExpenses)),1)])])]),t("div",pt,[t("div",kt,[e[8]||(e[8]=t("h3",{class:"text-lg font-semibold text-gray-700 dark:text-gray-300"},"Недавние транзакции",-1)),n(d(v),{href:r.route("transactions.index"),class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:x(()=>e[7]||(e[7]=[g(" Все → ")])),_:1},8,["href"])]),t("div",bt,[(s(!0),o(y,null,k(p.value,i=>(s(),B(L,{key:i.id,transaction:i},null,8,["transaction"]))),128)),a.recentTransactions.length?w("",!0):(s(),o("div",_t,"Нет недавних транзакций."))])])]),t("div",wt,[t("div",Bt,[t("h3",Ct,[n(d(z),{class:"w-5 h-5 mr-2 text-purple-600 dark:text-purple-400"}),e[9]||(e[9]=g(" Обзор данных "))]),t("div",Dt,[n(I,{chartData:r.chartDataFormatted},null,8,["chartData"])])]),t("div",At,[t("h3",jt,[n(d(P),{class:"w-5 h-5 mr-2 text-orange-600 dark:text-orange-400"}),e[10]||(e[10]=g(" Мои Долги "))]),t("div",Nt,[(s(!0),o(y,null,k(a.activeDebts,i=>(s(),B(T,{key:i.id,debt:i},null,8,["debt"]))),128)),a.activeDebts.length?w("",!0):(s(),o("div",Mt,"У вас нет активных долгов."))]),t("div",$t,[n(d(v),{href:r.route("debts.index"),class:"text-sm font-medium text-indigo-600 hover:text-indigo-500 dark:text-indigo-400 dark:hover:text-indigo-300"},{default:x(()=>e[11]||(e[11]=[g(" Все долги → ")])),_:1},8,["href"])])])])])])])]),_:1})],64))}};export{It as default};
